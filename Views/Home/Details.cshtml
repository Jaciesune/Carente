@model Carente.Models.Car

<h1>Szczegóły samochodu</h1>

<div>
    <h3>Samochód</h3>
    <p><strong>Marka:</strong> @Model.Marka</p>
    <p><strong>Model:</strong> @Model.Model</p>
    <p><strong>Typ silnika:</strong> @Model.Typ_Silnika</p>
    <p><strong>Numer VIN:</strong> @Model.Nr_Vin</p>
    <p><strong>Ilość drzwi:</strong> @Model.Ilosc_Drzwi</p>
    <p><strong>Pojemność silnika:</strong> @Model.Pojemnosc_Silnika</p>
    <p><strong>Kolor:</strong> @Model.Kolor</p>
    <p><strong>Ilość miejsc:</strong> @Model.Ilosc_Miejsc</p>
    <p><strong>Rocznik:</strong> @Model.Rocznik</p>
    <p><strong>Status:</strong> @Model.Status</p>
</div>

<div>
    <h3>Oferta</h3>
    <p><strong>Cena:</strong> @Model.Oferta.Cena</p>
    <p><strong>Ocena:</strong> @Model.Oferta.Ocena</p>
    <p><strong>Opis:</strong> @Model.Oferta.Opis</p>
    <p><strong>Status:</strong> @Model.Oferta.Status</p>
</div>

<div>
    <h3>Rezerwacja pojazdu</h3>
    <form asp-controller="Offer" asp-action="Reserve" method="post">
        <input type="hidden" name="carId" value="@Model.Id" />
        <div>
            <label for="reservationStart">Data rozpoczęcia rezerwacji:</label>
            <input type="date" id="reservationStart" name="reservationStart" required>
        </div>
        <div>
            <label for="reservationEnd">Data zakończenia rezerwacji:</label>
            <input type="date" id="reservationEnd" name="reservationEnd" required>
        </div>
        <button type="submit">Zarezerwuj</button>
    </form>
</div>

<script>
    // Pobranie dat zarezerwowanych jako tablica JavaScript z ViewBag
    const disabledDates = @Html.Raw(Json.Serialize(ViewBag.DisabledDates));

    // Obsługa zmiany daty rozpoczęcia
    document.getElementById('reservationStart').addEventListener('input', function () {
        const startDate = new Date(this.value);
        // Tutaj dodaj kod, który aktualizuje `disabled` dla daty zakończenia na podstawie startDate
    });

    // Funkcja wyłączająca niedostępne daty
    function disableUnavailableDates() {
        const startInput = document.getElementById('reservationStart');
        const endInput = document.getElementById('reservationEnd');

        // Tutaj dodaj logikę wyłączającą dni na podstawie `disabledDates`
    }
    disableUnavailableDates();
</script>
